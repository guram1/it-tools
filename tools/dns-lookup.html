<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNS Lookup Tool â€” Query DNS Records A, MX, TXT, NS, CNAME | OPS-BOX</title>
    <meta name="description" content="Free DNS lookup tool. Query all DNS record types including A, AAAA, MX, TXT, NS, CNAME, SOA, PTR. Check domain DNS configuration, mail servers, SPF, DKIM, and DMARC records.">
    <meta name="keywords" content="DNS lookup, DNS checker, MX record lookup, TXT record, NS lookup, CNAME lookup, SPF checker, DKIM checker, DMARC lookup, domain DNS">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://ops-box.net/tools/dns-lookup.html">
    
    <meta property="og:title" content="DNS Lookup Tool â€” Query All DNS Record Types">
    <meta property="og:description" content="Look up DNS records for any domain. Check A, MX, TXT, NS, CNAME, SOA records.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ops-box.net/tools/dns-lookup.html">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "DNS Lookup Tool",
        "url": "https://ops-box.net/tools/dns-lookup.html",
        "description": "Query DNS records for any domain - A, AAAA, MX, TXT, NS, CNAME, SOA",
        "applicationCategory": "NetworkingApplication",
        "operatingSystem": "Any",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
        "featureList": ["A record lookup", "MX record lookup", "TXT record lookup", "NS lookup", "CNAME lookup", "SOA lookup", "SPF/DKIM/DMARC check"]
    }
    </script>
    
    <style>
        .dns-input-section {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .dns-input-section .form-input {
            flex: 1;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .record-type-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .record-type-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.2s ease;
        }
        
        .record-type-btn:hover {
            background: var(--bg-card);
            color: var(--text-primary);
        }
        
        .record-type-btn.active {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
        }
        
        .record-type-btn.all {
            background: var(--bg-card);
            border-style: dashed;
        }
        
        .record-type-btn.all.active {
            background: var(--accent);
            border-style: solid;
        }
        
        .dns-results {
            display: none;
            margin-top: 1.5rem;
        }
        
        .dns-section {
            margin-bottom: 1.5rem;
        }
        
        .dns-section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px 8px 0 0;
            cursor: pointer;
        }
        
        .dns-section-header:hover {
            background: var(--bg-card);
        }
        
        .dns-section-header .icon {
            font-size: 1.1rem;
        }
        
        .dns-section-header .type {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--accent);
        }
        
        .dns-section-header .count {
            margin-left: auto;
            background: var(--bg-card);
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        .dns-section-header .toggle {
            color: var(--text-muted);
            transition: transform 0.2s;
        }
        
        .dns-section.collapsed .dns-section-header .toggle {
            transform: rotate(-90deg);
        }
        
        .dns-section-content {
            border: 1px solid var(--border);
            border-top: none;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
        }
        
        .dns-section.collapsed .dns-section-content {
            display: none;
        }
        
        .dns-record {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
        }
        
        .dns-record:last-child {
            border-bottom: none;
        }
        
        .dns-record:hover {
            background: var(--bg-secondary);
        }
        
        .dns-record .name {
            color: var(--text-muted);
            min-width: 150px;
        }
        
        .dns-record .ttl {
            color: var(--text-muted);
            font-size: 0.75rem;
            background: var(--bg-card);
            padding: 0.15rem 0.5rem;
            border-radius: 4px;
        }
        
        .dns-record .value {
            color: var(--text-primary);
            word-break: break-all;
            flex: 1;
        }
        
        .dns-record .priority {
            color: var(--accent);
            font-weight: 500;
        }
        
        .dns-record .copy-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.25rem;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .dns-record:hover .copy-btn {
            opacity: 1;
        }
        
        .dns-record .copy-btn:hover {
            color: var(--accent);
        }
        
        .dns-empty {
            padding: 1rem;
            color: var(--text-muted);
            font-style: italic;
            text-align: center;
        }
        
        .loading-inline {
            display: none;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            color: var(--text-muted);
        }
        
        .loading-inline.active {
            display: flex;
        }
        
        .spinner-small {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error-box {
            display: none;
            padding: 1rem;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 8px;
            color: #ef4444;
            margin-top: 1rem;
        }
        
        .email-security-summary {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .email-security-summary h3 {
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .security-checks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.75rem;
        }
        
        .security-check {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }
        
        .security-check .status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }
        
        .security-check .status.pass {
            background: rgba(34, 197, 94, 0.2);
            color: var(--accent);
        }
        
        .security-check .status.fail {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
        
        .security-check .status.warn {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }
        
        .export-section {
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        
        .export-section textarea {
            width: 100%;
            min-height: 150px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.75rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-primary);
            resize: vertical;
            margin-top: 0.5rem;
        }
        
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }
        
        .quick-actions .btn {
            font-size: 0.8rem;
            padding: 0.4rem 0.75rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="/" class="logo">
                <div class="logo-icon">âš¡</div>
                <div class="logo-text">OPS<span>-BOX</span></div>
            </a>
            <nav class="header-nav">
                <a href="/tools/subnet-calculator.html">Subnet</a>
                <a href="/tools/ssl-checker.html">SSL Check</a>
                <a href="/tools/ip-location.html">IP Location</a>
                <a href="/tools/dns-lookup.html">DNS Lookup</a>
            </nav>
        </div>
    </header>

    <main>
        <nav class="breadcrumb">
            <a href="/">Home</a><span>â€º</span><span class="breadcrumb-current">DNS Lookup</span>
        </nav>

        <div class="tool-container">
            <div class="tool-header">
                <h1 class="tool-title">DNS Lookup Tool</h1>
                <p class="tool-description">Query DNS records for any domain. Check A, AAAA, MX, TXT, NS, CNAME, SOA records and email security (SPF, DKIM, DMARC).</p>
            </div>
            
            <div class="tool-content">
                <div class="form-group">
                    <label class="form-label">Domain Name</label>
                    <div class="dns-input-section">
                        <input type="text" class="form-input" id="domainInput" placeholder="example.com">
                        <button class="btn btn-primary" onclick="lookupDNS()">Lookup</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Record Types</label>
                    <div class="record-type-selector">
                        <button class="record-type-btn all active" onclick="toggleRecordType(this, 'ALL')">ALL</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'A')">A</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'AAAA')">AAAA</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'MX')">MX</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'TXT')">TXT</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'NS')">NS</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'CNAME')">CNAME</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'SOA')">SOA</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'PTR')">PTR</button>
                        <button class="record-type-btn" onclick="toggleRecordType(this, 'CAA')">CAA</button>
                    </div>
                </div>
                
                <div class="quick-actions">
                    <span style="color: var(--text-muted); font-size: 0.8rem; margin-right: 0.5rem;">Quick:</span>
                    <button class="btn btn-secondary" onclick="quickLookup('google.com')">google.com</button>
                    <button class="btn btn-secondary" onclick="quickLookup('cloudflare.com')">cloudflare.com</button>
                    <button class="btn btn-secondary" onclick="quickLookup('github.com')">github.com</button>
                </div>
                
                <div class="loading-inline" id="loading">
                    <div class="spinner-small"></div>
                    <span>Querying DNS records...</span>
                </div>
                
                <div class="error-box" id="errorBox"></div>
                
                <div class="dns-results" id="dnsResults">
                    <!-- Email Security Summary -->
                    <div class="email-security-summary" id="emailSecurity" style="display: none;">
                        <h3>ðŸ“§ Email Security</h3>
                        <div class="security-checks">
                            <div class="security-check">
                                <span class="status" id="spfStatus">?</span>
                                <span>SPF Record</span>
                            </div>
                            <div class="security-check">
                                <span class="status" id="dkimStatus">?</span>
                                <span>DKIM</span>
                            </div>
                            <div class="security-check">
                                <span class="status" id="dmarcStatus">?</span>
                                <span>DMARC</span>
                            </div>
                            <div class="security-check">
                                <span class="status" id="mxStatus">?</span>
                                <span>MX Records</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- DNS Records will be inserted here -->
                    <div id="recordsContainer"></div>
                    
                    <!-- Export Section -->
                    <div class="export-section">
                        <label class="form-label">Export Results</label>
                        <textarea id="exportText" readonly onclick="copyExport()"></textarea>
                        <div class="btn-group" style="margin-top: 0.5rem;">
                            <button class="btn btn-secondary" onclick="copyExport()">Copy All</button>
                            <button class="btn btn-secondary" onclick="downloadExport()">Download TXT</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <section class="seo-content">
            <h2>About DNS Lookup</h2>
            <p>DNS (Domain Name System) translates human-readable domain names into IP addresses. This tool queries DNS servers to retrieve all record types associated with a domain.</p>
            
            <h3>DNS Record Types Explained</h3>
            <ul>
                <li><strong>A Record</strong> â€” Maps domain to IPv4 address (e.g., 192.168.1.1)</li>
                <li><strong>AAAA Record</strong> â€” Maps domain to IPv6 address</li>
                <li><strong>MX Record</strong> â€” Mail exchange servers with priority</li>
                <li><strong>TXT Record</strong> â€” Text data including SPF, DKIM, DMARC</li>
                <li><strong>NS Record</strong> â€” Authoritative name servers for the domain</li>
                <li><strong>CNAME Record</strong> â€” Canonical name (alias) pointing to another domain</li>
                <li><strong>SOA Record</strong> â€” Start of Authority with zone information</li>
                <li><strong>PTR Record</strong> â€” Reverse DNS lookup (IP to domain)</li>
                <li><strong>CAA Record</strong> â€” Certificate Authority Authorization</li>
            </ul>
            
            <h3>Email Security Records</h3>
            <ul>
                <li><strong>SPF (Sender Policy Framework)</strong> â€” Specifies which servers can send email for your domain</li>
                <li><strong>DKIM (DomainKeys Identified Mail)</strong> â€” Adds digital signature to verify email authenticity</li>
                <li><strong>DMARC (Domain-based Message Authentication)</strong> â€” Policy for handling failed SPF/DKIM checks</li>
            </ul>
            
            <h3>Common Use Cases</h3>
            <ul>
                <li><strong>Troubleshooting</strong> â€” Verify DNS propagation after changes</li>
                <li><strong>Email Deliverability</strong> â€” Check SPF, DKIM, DMARC configuration</li>
                <li><strong>Security Audits</strong> â€” Review CAA records and mail server setup</li>
                <li><strong>Migration</strong> â€” Document existing DNS configuration</li>
            </ul>
        </section>

        <section class="related-tools">
            <h2>Related Tools</h2>
            <div class="related-grid">
                <a href="/tools/ssl-checker.html" class="related-card">
                    <h3>SSL Certificate Checker</h3>
                    <p>Check SSL certificate expiry and configuration.</p>
                </a>
                <a href="/tools/ip-location.html" class="related-card">
                    <h3>IP Location Lookup</h3>
                    <p>Find geographic location of any IP address.</p>
                </a>
                <a href="/tools/subnet-calculator.html" class="related-card">
                    <h3>Subnet Calculator</h3>
                    <p>Calculate network addresses and plan IP allocations.</p>
                </a>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Network Tools</h3>
                <a href="/tools/subnet-calculator.html">Subnet Calculator</a>
                <a href="/tools/mac-vendor-lookup.html">MAC Vendor Lookup</a>
                <a href="/tools/ssl-checker.html">SSL Checker</a>
                <a href="/tools/dns-lookup.html">DNS Lookup</a>
            </div>
            <div class="footer-section">
                <h3>Security Tools</h3>
                <a href="/tools/password-generator.html">Password Generator</a>
                <a href="/tools/hash-generator.html">Hash Generator</a>
                <a href="/tools/ip-location.html">IP Location</a>
            </div>
            <div class="footer-section">
                <h3>Developer Tools</h3>
                <a href="/tools/json-formatter.html">JSON Formatter</a>
                <a href="/tools/base64-encoder.html">Base64 Encoder</a>
                <a href="/tools/wifi-qr-generator.html">WiFi QR Generator</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 OPS-BOX.net â€” Free IT utilities for professionals.</p>
        </div>
    </footer>

    <div class="toast" id="toast">Copied to clipboard!</div>

    <script src="../js/common.js"></script>
    <script>
        // Using Cloudflare DNS over HTTPS (DoH) - free, no API key, CORS enabled
        const DNS_API = 'https://cloudflare-dns.com/dns-query';
        
        let selectedTypes = ['ALL'];
        let allRecords = {};
        let currentDomain = '';
        
        const recordTypes = ['A', 'AAAA', 'MX', 'TXT', 'NS', 'CNAME', 'SOA', 'PTR', 'CAA'];
        
        const recordIcons = {
            'A': 'ðŸŒ',
            'AAAA': 'ðŸŒ',
            'MX': 'ðŸ“§',
            'TXT': 'ðŸ“',
            'NS': 'ðŸ–¥ï¸',
            'CNAME': 'ðŸ”—',
            'SOA': 'ðŸ“‹',
            'PTR': 'â†©ï¸',
            'CAA': 'ðŸ”’'
        };
        
        function toggleRecordType(btn, type) {
            if (type === 'ALL') {
                selectedTypes = ['ALL'];
                document.querySelectorAll('.record-type-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            } else {
                // Remove ALL if selecting specific type
                const allBtn = document.querySelector('.record-type-btn.all');
                allBtn.classList.remove('active');
                selectedTypes = selectedTypes.filter(t => t !== 'ALL');
                
                if (btn.classList.contains('active')) {
                    btn.classList.remove('active');
                    selectedTypes = selectedTypes.filter(t => t !== type);
                    if (selectedTypes.length === 0) {
                        selectedTypes = ['ALL'];
                        allBtn.classList.add('active');
                    }
                } else {
                    btn.classList.add('active');
                    selectedTypes.push(type);
                }
            }
        }
        
        function quickLookup(domain) {
            document.getElementById('domainInput').value = domain;
            lookupDNS();
        }
        
        function cleanDomain(input) {
            let domain = input.trim().toLowerCase();
            domain = domain.replace(/^https?:\/\//, '');
            domain = domain.replace(/\/.*$/, '');
            domain = domain.replace(/^www\./, '');
            return domain;
        }
        
        async function queryDNS(domain, type) {
            try {
                const response = await fetch(`${DNS_API}?name=${encodeURIComponent(domain)}&type=${type}`, {
                    headers: {
                        'Accept': 'application/dns-json'
                    }
                });
                
                if (!response.ok) throw new Error('DNS query failed');
                
                const data = await response.json();
                return data.Answer || [];
            } catch (e) {
                console.error(`Error querying ${type} for ${domain}:`, e);
                return [];
            }
        }
        
        async function lookupDNS() {
            const input = document.getElementById('domainInput').value.trim();
            if (!input) {
                alert('Please enter a domain name');
                return;
            }
            
            const domain = cleanDomain(input);
            currentDomain = domain;
            
            document.getElementById('loading').classList.add('active');
            document.getElementById('dnsResults').style.display = 'none';
            document.getElementById('errorBox').style.display = 'none';
            
            allRecords = {};
            
            try {
                const typesToQuery = selectedTypes.includes('ALL') ? recordTypes : selectedTypes;
                
                // Query all selected record types in parallel
                const promises = typesToQuery.map(type => 
                    queryDNS(domain, type).then(records => ({ type, records }))
                );
                
                const results = await Promise.all(promises);
                
                results.forEach(({ type, records }) => {
                    if (records.length > 0) {
                        allRecords[type] = records;
                    }
                });
                
                // Also check for DMARC
                const dmarcRecords = await queryDNS(`_dmarc.${domain}`, 'TXT');
                if (dmarcRecords.length > 0) {
                    allRecords['DMARC'] = dmarcRecords;
                }
                
                document.getElementById('loading').classList.remove('active');
                
                if (Object.keys(allRecords).length === 0) {
                    document.getElementById('errorBox').textContent = 'No DNS records found for this domain';
                    document.getElementById('errorBox').style.display = 'block';
                    return;
                }
                
                displayResults();
                
            } catch (error) {
                document.getElementById('loading').classList.remove('active');
                document.getElementById('errorBox').textContent = 'Error: ' + error.message;
                document.getElementById('errorBox').style.display = 'block';
            }
        }
        
        function displayResults() {
            document.getElementById('dnsResults').style.display = 'block';
            
            // Email security summary
            updateEmailSecurity();
            
            // Build records HTML
            const container = document.getElementById('recordsContainer');
            container.innerHTML = '';
            
            const typeOrder = ['A', 'AAAA', 'CNAME', 'MX', 'TXT', 'DMARC', 'NS', 'SOA', 'CAA', 'PTR'];
            
            typeOrder.forEach(type => {
                if (allRecords[type] && allRecords[type].length > 0) {
                    container.appendChild(createRecordSection(type, allRecords[type]));
                }
            });
            
            // Export text
            updateExportText();
        }
        
        function createRecordSection(type, records) {
            const section = document.createElement('div');
            section.className = 'dns-section';
            
            const icon = recordIcons[type] || 'ðŸ“„';
            
            section.innerHTML = `
                <div class="dns-section-header" onclick="toggleSection(this)">
                    <span class="icon">${icon}</span>
                    <span class="type">${type}</span>
                    <span class="count">${records.length} record${records.length > 1 ? 's' : ''}</span>
                    <span class="toggle">â–¼</span>
                </div>
                <div class="dns-section-content">
                    ${records.map(r => createRecordRow(type, r)).join('')}
                </div>
            `;
            
            return section;
        }
        
        function createRecordRow(type, record) {
            const value = record.data || '';
            const ttl = record.TTL || 0;
            const name = record.name || '';
            
            let displayValue = value;
            let extra = '';
            
            // Format based on type
            if (type === 'MX') {
                const parts = value.split(' ');
                if (parts.length >= 2) {
                    extra = `<span class="priority">Priority: ${parts[0]}</span>`;
                    displayValue = parts.slice(1).join(' ');
                }
            } else if (type === 'SOA') {
                // SOA has multiple parts
                displayValue = value.replace(/\s+/g, ' ');
            } else if (type === 'TXT' || type === 'DMARC') {
                // Remove surrounding quotes if present
                displayValue = value.replace(/^"|"$/g, '');
            }
            
            return `
                <div class="dns-record">
                    <span class="name">${name}</span>
                    <span class="ttl">TTL: ${formatTTL(ttl)}</span>
                    ${extra}
                    <span class="value">${escapeHtml(displayValue)}</span>
                    <button class="copy-btn" onclick="copyRecord('${escapeHtml(value)}')" title="Copy">ðŸ“‹</button>
                </div>
            `;
        }
        
        function formatTTL(seconds) {
            if (seconds < 60) return `${seconds}s`;
            if (seconds < 3600) return `${Math.floor(seconds / 60)}m`;
            if (seconds < 86400) return `${Math.floor(seconds / 3600)}h`;
            return `${Math.floor(seconds / 86400)}d`;
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function toggleSection(header) {
            header.parentElement.classList.toggle('collapsed');
        }
        
        function updateEmailSecurity() {
            const emailSection = document.getElementById('emailSecurity');
            
            // Check if we have email-related records
            const hasMX = allRecords['MX'] && allRecords['MX'].length > 0;
            const txtRecords = allRecords['TXT'] || [];
            
            const spf = txtRecords.find(r => r.data && r.data.includes('v=spf1'));
            const dmarc = allRecords['DMARC'] && allRecords['DMARC'].length > 0;
            const dkim = txtRecords.find(r => r.data && r.data.includes('v=DKIM1'));
            
            if (hasMX || spf || dmarc) {
                emailSection.style.display = 'block';
                
                // SPF
                const spfStatus = document.getElementById('spfStatus');
                if (spf) {
                    spfStatus.className = 'status pass';
                    spfStatus.textContent = 'âœ“';
                } else {
                    spfStatus.className = 'status fail';
                    spfStatus.textContent = 'âœ—';
                }
                
                // DKIM (hard to detect without knowing selector)
                const dkimStatus = document.getElementById('dkimStatus');
                dkimStatus.className = 'status warn';
                dkimStatus.textContent = '?';
                
                // DMARC
                const dmarcStatus = document.getElementById('dmarcStatus');
                if (dmarc) {
                    dmarcStatus.className = 'status pass';
                    dmarcStatus.textContent = 'âœ“';
                } else {
                    dmarcStatus.className = 'status fail';
                    dmarcStatus.textContent = 'âœ—';
                }
                
                // MX
                const mxStatus = document.getElementById('mxStatus');
                if (hasMX) {
                    mxStatus.className = 'status pass';
                    mxStatus.textContent = 'âœ“';
                } else {
                    mxStatus.className = 'status fail';
                    mxStatus.textContent = 'âœ—';
                }
            } else {
                emailSection.style.display = 'none';
            }
        }
        
        function updateExportText() {
            let text = `DNS Records for ${currentDomain}\n`;
            text += `Queried: ${new Date().toISOString()}\n`;
            text += '='.repeat(50) + '\n\n';
            
            const typeOrder = ['A', 'AAAA', 'CNAME', 'MX', 'TXT', 'DMARC', 'NS', 'SOA', 'CAA', 'PTR'];
            
            typeOrder.forEach(type => {
                if (allRecords[type] && allRecords[type].length > 0) {
                    text += `[${type} Records]\n`;
                    allRecords[type].forEach(r => {
                        text += `  ${r.name}  ${r.TTL}  ${type}  ${r.data}\n`;
                    });
                    text += '\n';
                }
            });
            
            text += '\nGenerated by OPS-BOX.net';
            
            document.getElementById('exportText').value = text;
        }
        
        function copyRecord(value) {
            navigator.clipboard.writeText(value.replace(/^"|"$/g, ''));
            showToast('Copied!');
        }
        
        function copyExport() {
            const text = document.getElementById('exportText').value;
            navigator.clipboard.writeText(text);
            showToast('All records copied!');
        }
        
        function downloadExport() {
            const text = document.getElementById('exportText').value;
            const blob = new Blob([text], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `dns-${currentDomain}.txt`;
            link.click();
            showToast('Downloaded!');
        }
        
        // Enter key support
        document.getElementById('domainInput').addEventListener('keypress', e => {
            if (e.key === 'Enter') lookupDNS();
        });
    </script>
</body>
</html>
